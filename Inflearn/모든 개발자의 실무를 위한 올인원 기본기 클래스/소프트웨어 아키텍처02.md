# 소프트웨어 아키텍처 : 레이어드 아키텍처

```
출처 : 모든 개발자의 실무를 위한 올인원 기본기 클래스
```

​	

## 개념

레이어마다 역할을 정의해 놓은 구조



대표적인 `4 레이어드 아키텍처`

1. 프레젠테이션 레이어 (User Interface) - 외부와의 연결 담당
2. 애플리케이션 레이어 (Application) - 비즈니스 로직 담당 (소프트웨어의 주요 기능)
3. 도메인 레이어 (Domain) - 도메인 객체 담당
4. 인프라스트럭처 레이어 (InfraStructure) - 다른 레이어를 지탱하는 기술적 기반 담당 (DB 연결, ORM 객체, 메시지 큐 등)

> 도메인 레이어 + 인프라스트럭처 레이어 => `DB 접근 레이어`로도 구성 가능
>
> 이 경우 3 레이어드 아키텍처



[의존성의 방향]

`프레젠테이션 레이어` -> `애플리케이션 레이어` -> `도메인 레이어` -> `인프라스트럭처 레이어`



## 예시

[쇼핑몰 백엔드]

```
src/
  presentation_layer/
    product_controller.py
    user_controller.py
    
  application_layer/
    product_service.py
    user_service.py
    
  domain_layer/
    product.py
    user.py
    
  infrastructure_layer/
  	repositories/
  	  product_repository.py
  	  user_repository.py
    database.py
    orm.py
```



### 프레젠테이션 레이어

> 애플리케이션 레이어에 의존함

- REST API 형태로 입력을 받고 이를 애플리케이션에서 활용할 수 있는 형태로 바꿈
- 애플리케이션에서 결과를 받으면 이를 REST API 형태로 클라이언트에게 응답



### 애플리케이션 레이어

> 도메인 레이어에 의존함

> 프레젠테이션 레이어에 의존하지 않음 (코드 내에서 프레젠테이션 레이어의 존재를 알 수 없음)

- 비즈니스 로직을 구현한 함수의 집합
- 입력 -> 처리 -> 처리 결과를 반환



### 도메인 레이어

> 인프라스트럭처 레이어에 의존함

- 도메인을 표현하는 레이어
- 도메인 객체들을 다룸



### 인프라스트럭처 레이어

> 다른 레이어에 의존하지 않음

- 가장 낮은 추상화 수준



## 장단점

### 장점

- 단일 책임 원칙 (SRP)과 비슷한 효과 -> 유지보수 및 코드 관리가 용이
- 의존성 방향이 일정
  - 통일된 흐름으로 빠르게 새로운 기능 개발 가능
  - 전체적인 구조 파악 용이



### 단점

**최종적으로 인프라스트럭처(ex. DB)에 의존성을 갖게 됨**

즉 비즈니스 로직이 DB에 영향을 받는 일이 생김

=> **모든 구조가 DB 중심의 설계가 됨**

또 "액션"이 아니라 "상태"를 중심으로 설계하게 됨