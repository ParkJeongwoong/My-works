# 테스트 더블 : 의존성 대체

```
출처 : 모든 개발자의 실무를 위한 올인원 기본기 클래스
```

​	

## 의존성 문제

통합 테스트 부터는 외부 의존성을 가지는 경우가 발생 (ex. DB에 연결하는 경우)

이는 외부 환경에 테스트가 영향을 받는다는 이야기 <= 테스트하려는 코드는 정상적이지만 DB 문제로 에러 발생 가능



## 테스트 더블

> 의존성 객체를 대체하기 위한 테스트용 객체

테스트 더블 객체를 만들고,

테스트할 함수에 외부 의존성 객체를 주입,

코드를 돌릴 때는 실제 외부 의존성 객체를 사용하고 테스트 할 때는 테스트 더블 객체를 사용



## 종류

> 외울 필요 X

### dummy

- 객체의 동작 미구현
- 객체의 인터페이스만 구현



- 사용처
  - 메서드가 제대로 동작할 필요가 없을 때



### stub

- 최소한의 구현
- 미리 준비해 둔 결과 반환



### spy

- stub을 포함
- 정보 기록
- 잘 동작했는지 기록하는 인스턴스 변수 존재



### fake

- 객체의 동작 구현



- 사용처
  - 대체할 객체의 내부 로직이 복잡할 때
  - 대체할 객체에 외부 의존성이 있을 때



### mock

- 필요한 인터페이스와 반환 값을 제공
  - mock 객체는 보통 직접 생성하지 않고 테스트 프레임워크에서 제공해주는 객체를 사용



- 사용처
  - 해당 메서드가 제대로 호출됐는지 검증 (`행위검증`)