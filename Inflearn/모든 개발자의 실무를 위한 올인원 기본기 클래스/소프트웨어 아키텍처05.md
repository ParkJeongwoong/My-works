# 소프트웨어 아키텍처 : 모놀리스 아키텍처 & 마이크로서비스 아키텍처

```
출처 : 모든 개발자의 실무를 위한 올인원 기본기 클래스
```

모놀리스 -> 마이크로서비스로 아키텍처를 전환한다는 것의 의미는?



## 모놀리스 아키텍처

### 개념

> 한 프로젝트에서 하나의 소프트웨어를 구성

단일 프로젝트를 통해 애플리케이션을 동작시킴

```
app/
  domain/
  service/
  controller/
  main.py
  config.json
```

`app` 안에서 모든 서비스를 제공



### 장단점

[장점]

- 개발이 간단하고 리뷰가 용이
- 소프트웨어 구조가 비교적 단순 => 큰 그림을 보기 편리
- 배포가 쉬움 (`main.py` 만 실행시키면 애플리케이션 동작)
- 디버깅이나 장애 대응이 쉬움

[단점]

- 코드가 많아지고 서비스가 확장되면 전체 구조나 코드 흐름을 이해하기 어려움
- 모든 코드가 한 프로젝트 내에서 결합 => 코드 변경/확장이 어려움
- 개발 속도가 느려짐 (전체 코드를 다 이해해야 코드 작성 가능)
- 테스트해야 할 양이 늘어나 테스트 속도가 매우 느려짐 (빌드 역시 마찬가지)
- 최신 기술 스택이 나와도 쉽게 도입하기 어려움 (모든 코드에 영향)



=> **기능 개발과 속도가 중요한 사업 초기에 사용**



## 마이크로서비스 아키텍처

### 개념

독립적인 여러 프로젝트가 모여 하나의 소프트웨어를 구성

이 때의 각 컴포넌트가 마이크로 서비스



```
[쇼핑몰 백엔드]
<= 사용자 관련 마이크로서비스 (Users 도메인)
<= 상품 관련 마이크로서비스 (Products 도메인)
<= 결제 관련 마이크로서비스 (Payment 도메인)
...
```

(쇼핑몰 서비스가 위처럼 여러 개의 마이크로 서비스로 구성됨)

* 이 때 **각 서버가 모두 동작하고 있는 상태**여야 쇼핑몰 백엔드가 제대로 동작
* 각 마이크로서비스(서버)는 **HTTP 통신으로 연결**
* 각 마이크로서비스마다 다른 프로그래밍 언어, 데이터베이스를 구성 가능



### 장단점

[장점]

- 각 서비스가 모놀리스보다 작은 규모 => 마이크로 서비스별로 코드 구조나 흐름을 이해하기 쉬움
- 서비스간 결합이 강하지 않음 => 각 서비스별 수정/확장이 편리
- 개발 속도가 빨라짐
- 서비스 별 테스트 => 테스트와 빌드, 배포 속도가 빨라짐
- 서비스 별로 컴퓨팅 리소스(cpu, memory, etc)를 다르게 줄 수 있음 & 서버 개수도 다르게 둘 수 있음 => 서버 확장에 용이
- 서비스 별로 기술 스택을 다르게 구성 가능 => 최신 기술 스택 도입이 용이

[단점]

- 연관된 여러 서비스를 통합하여 테스트할 때 난이도가 높아짐
- 어떤 기준으로 마이크로서비스를 나눌지 결정하는 것이 어려움 (잘못 나누면 서비스간 결합도가 높아지고 관리 비용이 늘어남)
  - `마이크로서비스를 구현하기 위한 방법론 : DDD EDA`
- 서비스의 전체 그림을 파악하기 어려울 때가 있음 => 큰 그림과 흐름을 파악하기 위한 커뮤니케이션 비용이 필요
- (여러 서비스에 걸친 분산 트랜잭션 처리 등) 분산 시스템 환경에서 고민할 문제들이 많음

