# 소프트웨어 아키텍처 : 클린 아키텍처

```
출처 : 모든 개발자의 실무를 위한 올인원 기본기 클래스
```

​	

## 개념

> 클린코드의 저자, 로버트 C. 마틴이 제시한 아키텍처

[좋은 아키텍처란?]

- 좋은 아키텍처는 시스템을 **쉽게** (**이해**하고, **개발**하며, **유지보수**하고, **배포**)할 수 있게 한다.
- 아키텍처는 시스템의 **동작 여부 자체**와는 거의 관련이 없다.
- 아키텍처는 소프트웨어를 **유연하고 부드럽게** 구조화한다.
- 좋은 아키텍트는 시스템의 **핵심적인 요소(`정책`)를 식별**하고, 동시에 `세부사항`은 이 정책에 무관하게 만들 수 있는 형태로 시스템을 구축한다.
- 좋은 아키텍트는 **세부사항에 대한 결정을 가능한 한 오랫동안 미룰 수 있는 방향으로** 정책을 설계한다.



[핵심]

1. 세부 사항(DB, 프레임워크)가 정책(업무 규칙)에 영향 X
2. 계층별로 관심사를 명확하게 분리 => 변경이 필요할 때 영향을 주는 부분을 최소화
3. 내부 계층이 외부 계층을 의존 X



### 형태

![img](https://blog.kakaocdn.net/dn/lxciD/btqG3lIG6ym/kcSRUhV2779YNl8j0ELiO1/img.jpg)

- **엔티티** (가장 안쪽, 가장 고수준)
  - 핵심 업무 규칙을 캡슐화
  - 외부 의존 X
  - 가장 변하지 않음
- **유스케이스**
  - 애플리케이션에 특화된 업무 규칙
  - 엔티티의 데이터 흐름을 조정, 조작
- **인터페이스 어댑터** (컨트롤러, 게이트웨이, 프레젠터)
  - 어댑터들로 구성
    - 상위 계층과 하위 계층을 오가는 데이터를 알맞게 변형
  - 컨트롤러(Controller), 프레젠터(Presenter), 게이트웨이(Gateway) 등
- **프레임워크와 드라이버** (DB, 외부 인터페이스, UI 등)
  - 핵심 업무와는 관련 없는 세부 사항 (언제든 수정 가능)
  - 프레임워크나, 데이터베이스, 웹서버 등


> 레이어는 상황에 따라 더 많아질 수도 있음



## 의존성의 방향

`저수준` -> `고수준`

`외부 계층` -> `내부 계층`

즉 내부 계층은 외부 계층의 상황에 대해 전혀 알 수 없어야 한다



### 중요

```
CreateUser 서비스의 경우 UseCase의 영역이다.
일반적인 경우 CreateUser는 UserRepository를 사용해서 DB에 유저를 생성하는데, UserRepository는 Framework&Driver의 영역이다.
즉 고수준인 CreateUser(UseCase)가 저수준인 UserRepository(Framework&Driver)를 사용하는 것이다.
[안쪽에서 바깥쪽을 다룸 <= 옳지 않음]

이를 해결하기 위해 클린 아키텍처를 비록한 여러 아키텍처에서는 "의존성 역전"을 활용한다.
즉 UseCase 영역에 인터페이스, UserRepository를 만들고 Framework&Driver 영역에서 이를 상속받아 UserRepository 구현체를 만든다.
이렇게 되면 CreateUser는 같은 수준의 인터페이스를 사용하게 되고 의존성이 저수준에서 고수준을 향하게 된다.
[동일한 수준에서 다뤄짐 & 바깥쪽에서 안쪽을 의존]
```